---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Miha Pelhan"
output:
  pdf_document:
    includes:
      in_header: lib/styles.sty
  html_document: default
  word_document: default
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

Za temo mojega projekta sem si izbral analizo igralcev lige NBA v sezoni 2014-15. Analiziral bom vse statistične prvine košarke, na podlagi podatkov, ki jih bom pridobil iz:
1. http://www.basketball-reference.com/leagues/NBA_2015_totals.html?lid=header_seasons
2. http://www.spotrac.com/widget/sport/nba/current-year/rankings-cap/
3. https://en.wikipedia.org/wiki/2014%E2%80%9315_NBA_season

Kasneje bom dodal še zemljevid, na katerem bo prikazano, od kod prihajajo igralci iz lige.


# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE,results='hide',message=FALSE,warning=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

V tej fazi sem uvozil podatke v obliki CSV (iz povezave 1), ter podatke v obliki HTML (iz povezav 2 in 3). V CSV datoteki sem dobil vse statistične podatke, k sem jih potreboval, iz povezave 2 pa sem dobil še podatke o plačah igralcev in tabeli združil. Tako da so zdaj vsi podatki, ki sem jih do sedaj potreboval zbrani v eni tabeli. V tej tabeli so vsi številčni podatki v stolpcih oblike numeric, ostali so oblike character. Spremenljivk je vseh skupaj 29, vrstic pa 473, saj je igralcev v ligi zelo veliko.

Na spletu sem našel tabelo z igralci, ki so bili najboljši v posamezni kategoriji:

```{r,echo=FALSE,message=FALSE}
kable(tabela)
```

Po podatkih iz moje tabele pa lahko predstavim naprimer nekaj igralcev, ki so dosegli največ točk:

```{r,echo=FALSE,message=FALSE}
kable(head(strelci))
```

Ter še nekaj igralcev, ki so bili najbolje plačani:

```{r,echo=FALSE,message=FALSE}
kable(head(place))
```

# Vizualizacija
```{r vizualizacija, echo=FALSE,results='hide',message=FALSE,warning=FALSE,fig.keep='none'}
source("vizualizacija/vizualizacija.r", encoding = "UTF-8")
```

Za začetek vizualizacije sem iz spleta pridobil tabelo z Severnoameriškimi mesti, ki so prispevala največ igralcev. Osredotočil sem se na Ameriška mesta, saj je bilo edino mesto izven ZDA Toronto, ki pa je predstavljal veliko nevšečnost pri risanju zemljevida, saj bi bil le-ta prevelik. Nato sem tabeli dodal še koordinate mest in mesta predstavil na zemljevidu.

```{r,echo=FALSE,message=FALSE,warning=FALSE}
map1
```

Torej, prvi zemljevid predstavlja 15 mest iz ZDA, v katerih je bilo rojenih največ igralcev v ligi NBA. Večji kot je krogec ob določenem mestu, več igralcev je bilo tam rojenih.

Na naslednjam zemljevidu pa so predstavljena mesta, v katerih imajo določeni klubi sedeže.


```{r,echo=FALSE,message=FALSE,warning=FALSE}
map2
```

Iz primerjave obeh grafov je lepo razvidno, da največ igralcev izhaja iz mest, v katerih se nahajajo tudi klubi. To je sicer logično, saj gre za največja mesta državi, kljub temu pa pride do nekaj izjem. Naprimer Seattle in Baton Rouge, ki "pridelata" veliko igralcev, nimata svojih klubov (Seattle ga je sicer imel do l. 2008, a se je franšiza preselila v Oklahomo). Na drugi strani pa imamo naprimer Oakland, iz katerega izhajajo kasnejši zmagovalci lige, iz katerega izhaja malo igralcev.

# Napredna analiza

Pri napredni analizi sem se odločil, da bom igrazce razvrstil po igralnih položajih in jih nato primerjal med sabo. To sem naredil tako, da sem iz glavne tabele pobral igralce, ki igrajo na enakih položajih. Teh položajev je 5, torej bo tu sledilo 5 razdelkov.


```{r,echo=FALSE,message=FALSE,warning=FALSE}
barplot(dataSG1$Points,xlab = "Points", horiz=TRUE, names.arg = dataSG1$Player, las=1,cex.names = 0.5, main = "Branilci")
```

```{r,echo=FALSE,message=FALSE,warning=FALSE}
barplot(dataC1$Points,xlab = "Points",horiz=TRUE, names.arg = dataC1$Player,las=1,cex.names=0.5, main= "Centri")
```

```{r,echo=FALSE,message=FALSE,warning=FALSE}
barplot(dataPG1$Points,xlab = "Points",horiz=TRUE, names.arg = dataPG1$Player,las=1,cex.names=0.5, main = "Organizatorji")
```

```{r,echo=FALSE,message=FALSE,warning=FALSE}
barplot(dataSF1$Points,xlab = "Points",horiz=TRUE, names.arg = dataSF1$Player,las=1,cex.names=0.5, main="Krila")
```

```{r,echo=FALSE,message=FALSE,warning=FALSE}
barplot(dataPF1$Points,xlab = "Points",horiz=TRUE, names.arg = dataPF1$Player,las=1,cex.names=0.5, main="Krilni centri")
```
